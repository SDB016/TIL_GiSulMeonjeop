# CSRF(Cross-Site Request Forgery)  
> 사이트 간 요청 위조
      
CSRF는 기본적으로 **권한을 탈취하는 해킹 기법이 아니다.**            
오히려, **권한이 있거나 없어도 되는 가정하에 특정 작업을 처리하도록 하는 기법이다.**      
         
1. 사용자는 특정 사이트로부터 로그인을 했다.          
2. 해커가 사용자에게 피싱기법을 이용하여 특정 URL을 클릭하도록 유도한다.            
3. 만약, 사용자가 해당 URL을 클릭하면 패스워드를 변경시키는 작업을 하도록한다.            
4. 이후, 해커는 변경된 패스워드를 통해서 특정 사이트로 로그인하고 정보를 탈취한다.    
     
즉, 공격자가 링크를 통해 사용자가 인식하지 못하는 작업이나 정보를 탈취하는 기법이다.          
  
# 해결법   
가장 현명한 방법은 스크립트 문구를 마음대로 삽입할 수 없도록 아예 전부 차단하는 것이다.    
혹은 네이버에서 동영상 링크 등을 업로드 할 때와 같이   
자체적인 필터링 시스템을 구축해서 모든 경우의 수를 막거나,   
아니면 그냥 아예 이미 만들어진 XSS 관련 방어 라이브러리를 사용하는 것도 좋은 방법입니다    .

# 시큐리티의 CSRF 
## 동작    
## Rest api에서의 CSRF(disable 이유)    
그래서 이렇게 보안 수준을 향상시키는 CSRF를 왜 disable 하였을까?   
spring security documentation에 non-browser clients 만을 위한 서비스라면 csrf를 disable 하여도 좋다고 한다.    
   
이 이유는 rest api를 이용한 서버라면,    
session 기반 인증과는 다르게 stateless하기 때문에 서버에 인증정보를 보관하지 않는다.    
rest api에서 client는 권한이 필요한 요청을 하기 위해서는 요청에 필요한 인증 정보를(OAuth2, jwt토큰 등)을 포함시켜야 한다.   
따라서 서버에 인증정보를 저장하지 않기 때문에 굳이 불필요한 csrf 코드들을 작성할 필요가 없다.   
  
