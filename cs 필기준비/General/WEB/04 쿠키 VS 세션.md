# 쿠키(Cookie)   
> 클라이언트가 웹사이트에 접속할 때 그 사이트가 사용하게 되는 일련의 작은 기록 파일이다.  

```
POST http://localhost:8080/api/login

HTTP/1.1 200 
Set-Cookie: id=wooji; Max-Age=10000; Expires=Mon, 15-Nov-2021 16:29:57 GMT
Set-Cookie: pw=password; Max-Age=10000; Expires=Mon, 15-Nov-2021 16:29:57 GMT
```

1. 클라이언트가 서버에게 특정 작업을 처리하는 것을 요청한다.       
2. 서버는 작업을 완료하고 클라이언트에게 제공할 정보를 Cookie 헤더에 담아 전달한다.         
3. 클라이언트는 Cookie 응답 헤더의 정보를 클라이언트의 컴퓨터에 저장을 한다.     
4. 이후부터는, 클라이언트가 서버에게 요청을 할 때마다 모든 쿠키를 헤더에 담아 전송한다.       

**장점**  
* 클라이언트의 데이터를 서버에서 사용 가능하게끔 해준다.        
* 세션에 비해 서버에 저장되는 데이터가 적어 서버의 저장공간을 절약해준다.    
    
**단점**      
* 클라이언트에서 관리하는 것이므로 조작될 가능성이 높다.      
* 노출되면, 모든 데이터가 노출되기 때문에 민감한 데이터에 적합하지 않다.      
* 브라우저마다 쿠키에 대한 지원 형태가 다르기 때문에 브라우저간의 공유가 불가능하다.    
* 쿠키의 사이즈가 제한(4KB)되어있어 원하는만큼의 충분한 데이터를 담을 수 없는 경우가 있다.  
* 모든 요청에 모든 쿠키를 담아 보내야하므로 성능적으로 좋지 않고, 매번 올바른 쿠키인지 검증하는 로직도 필요하다.  

# 세션   
> 세션은 서버와 클라이언트의 유효한 커넥션을 식별하고 해당 클라이언트만의 정보가 저장되는 공간을 의미한다.       
    
세션은 하나의 웹 브라우저에 대한 `세션 ID(JSESSIONID 쿠키)`를 가진다.        
세션 ID는 동일 커넥션임을 인정해주고, 클라이언트만의 세션 저장소를 식별할 수 있게 해준다.           

```
POST http://localhost:8080/api/login

HTTP/1.1 200 
Set-Cookie: JSESSIONID=859AIFSL1S31VCBX25B31K5GSDSJK12341RBN13J124NKAS 
```
 
1. 클라이언트가 서버에게 특정 작업을 처리하는 것을 요청한다.                
2. 서버는 작업 완료후, **클라언트만의 세션 영역을 제공해주기 위해 세션ID를 세션 저장소에 저장하고 JSESSIONID 쿠키에 세션ID를 담아 응답한다**                  
3. JSESSIONID는 쿠키이기 때문에 클라이언트는 JSESSIONID를 클라이언트의 컴퓨터에 저장을 한다.              
4. 클라이언트는 요청시마다 JSESSIONID를 함께 전송하고, 서버는 이를통해 클라이언트에게 알맞는 세션 영역을 제공해준다.     
    
단, HTTP의 Stateless한 장점(서버 증설에 좋다)와 반대로 Stateful한 상태가 되어 여러 서버 존재시 동기화 필요하다.     
즉, HTTP의 장점을 죽이기 때문에 패러다임에서 맞지 않다.    
 
**장점**    
* 세션 ID 쿠키가 탈취당하는 등의 보안이 문제가 발생하면, 서버에서 세션 저장소를 비우면 된다.   
       
**단점**   
* 모종의 이유로 세선 저장소를 비우게 되면 모든 사용자들에게도 영향이 간다.        
* StateFul하기 때문에, Scale Out시 동기화 작업을 처리해아한다.        
* 사용자의 수가 많아질수록 많은 저장공간을 차지하게 된다.       
* 세션ID는 쿠키의 데이터이기 때문에, 매 요청시마다 세션ID를 얻고 저장소를 조회해야한다.     
