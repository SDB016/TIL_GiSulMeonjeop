# 가상 메모리 
일반적으로 물리적인 메모리의 주소 변환은 운영체제가 관리하지 않지만   
가상 메모리는 운영체제가 관리하는 메모리이다.   
  
# Demand Paging
**실제로 필요할 때 page를 메모리에 올리는 것**  
* I/O양의 감소 
* Memory 사용량 감소 
* 빠른 응답 시간 
* 더 많은 사용자 수용 

**Valid/Invalid bit의 사용**
* invalid 의 의미   
    * **사용되지 않는 주소 영역인 경우** 
    * 페이지가 물리적 메모리에 없는 경우    
    * 즉, 메인 메모리에 올라가져있지 않고 디스크에 있는 남아있는 페이지의 상태를 의미한다.   
* 처음에는 모든 page entry가 invalid 로 초기화   
* address translation 시에 invalid bit이 set 되어 있으면 **page fault(페이지 부채)**   

# Page Fault   

* Invalid Page를 접근하면 MMU가 trap을 발생시킨다. (page fault trap)    
* Kernel Mode로 들어가서 **page fault handler** 가 invoke 된다.        
* 아래와 같은 순서로 page fault를 처리한다.  
  
**page fault 처리**  
1. invalid refernece 라고 판단되면 abord process 
2. get an empty page frame(앖으면 뺏어온다.)  
3. 해당 페이지를 disk에서 memory로 읽어온다.   
    1. disk I/O가 끝나기까지 이 프로세스는 CPU를 preempt 당함(block)   
    2. Dist read가 끝나면 page tables entry 기록
    3. ready queue에 process를 insert -> dispatch later 
4. 이 프로세스가 CPU를 잡고 다시 running  
5. 아까 중단되었던 instruction을 재개  






