# 가상 메모리 
일반적으로 물리적인 메모리의 주소 변환은 운영체제가 관리하지 않지만   
가상 메모리는 운영체제가 관리하는 메모리이다.   
  
# Demand Paging
**실제로 필요할 때 page를 메모리에 올리는 것**  
* I/O양의 감소 
* Memory 사용량 감소 
* 빠른 응답 시간 
* 더 많은 사용자 수용 

**Valid/Invalid bit의 사용**
* invalid 의 의미   
    * **사용되지 않는 주소 영역인 경우** 
    * 페이지가 물리적 메모리에 없는 경우    
    * 즉, 메인 메모리에 올라가져있지 않고 디스크에 있는 남아있는 페이지의 상태를 의미한다.   
* 처음에는 모든 page entry가 invalid 로 초기화   
* address translation 시에 invalid bit이 set 되어 있으면 **page fault(페이지 부채)**   

# Page Fault   

* Invalid Page를 접근하면 MMU가 trap을 발생시킨다. (page fault trap)    
* Kernel Mode로 들어가서 **page fault handler** 가 invoke 된다.        
* 아래와 같은 순서로 page fault를 처리한다.  
     
**page fault 처리**  
1. 페이지 테이블을 검사하여 필요로 하는 페이지의 메모리 참조가 유효(valid)한지, 유효하지 않은지(invalid) 판단한다.   
2. 유효하지 않은(invalid) 상태라면 운영체제에게 트랩(trap)을 건다.     
   운영체제는 invalid 한 경우가 메모리 경계를 넘는 것이라면 프로그램을 종료시키고, 페이지 폴트(page fault)라면 free frame 을 찾는다.    
3. 디스크에서 해당 페이지를 로딩하라고 I/O 요청을 하며, 프로세스를 waiting 상태로 바꾼다.   
4. 페이지 폴트(page fault)를 야기했던 인스트럭션부터 다시 수행한다.   
5. 페이지가 free frame 에 로딩이 완료되었다는 인터럽트가 오면         
   페이지 테이블에 접근해서 상태를 invalid 에서 valid 로 변경한 후, 프로세스를 waiting 에서 ready 로 변경한다.     





