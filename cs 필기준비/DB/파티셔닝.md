# 개요 
서비스 규모가 커지고 DB에 저장하는 데이터의 규모 또한 대용량화 되면   
기존 DBMS의 용량(Storage)의 한계와 성능의 저하를 가져온다.         
      
`VLDB` 즉 하나의 RDBMS에 너무 큰 테이블이 들어가면 용량과 성능 측면에서 많은 이슈가 발생하게 되는데    
이러한 이슈를 해결하기 위해, **파티션**이라는 작은 단위로 나누어 관리하는 **파티셔닝 기법을 사용하면 된다.**              
              
# 개념         
하나의 논리적인 테이블을 다수의 물리적인 파티션으로 나누어 관리하는 방법을 의미한다.                   
물리적인 데이터 분할이 있더라도 하나의 논리적인 테이블이기 때문에 애플리케이션은 이를 인식하지 못한다.    
    
## 목적 
1. 가용성 : 
    * 물리적인 분리로 장애 발생시 전체 데이터에 대한 훼손 가능성을 줄고 데이터 가용성 향상된다.   
2. 관리 용이성 : 
    * 큰 테이블을 제거하여 관리를 쉽게한다.     
3. 성능 : 
    * 특정 DML과 Query의 성능을 향상시킨다(특정만)
    * 주로 대용량 Data Writer 환경에서 효율적이다.      
    * 많은 insert가 있는 OLTP 시스템에서 Insert 작업들을 분리된 파티션들로 분산시켜 결합을 줄인다.

## 장점 

1. 관리적 측면 : 
    * 전체 데이터를 손실할 가능성이 줄어들어 가용성이 향상된다.    
    * 파티션별로 백업 복구가 가능하다.   
    * 파티션 단위로 I/O 분산이 가능하여 Update 성능을 향상시킨다.   
2. 성능적 측면 : 
    * 데이터 전체 검색 시 필요한 부분만 탐색해 성능이 증가한다.   
        * 즉, Full Scan 에서의 데이터 Access의 범위를 줄여 성능 향상을 가져온다.   
        * 필요한 데이터만 빠르게 조회할 수 있기 때문에 쿼리 자체가 가볍다.(슬로우 쿼리X)  
 
## 단점   
1. 테이블간의 JOIN 비용이 증가한다.      
2. 테이블과 인덱스를 별도로 파티션할 수 없기 때문에, 인덱스도 같이 파티셔닝해야 한다.        
       
# DB 파티셔닝의 종류  
## 수평 파티셔닝
    
**개념**    
1. 샤딩과 동일한 개념     
2. 스키마를 복제한 후 샤드키를 기준으로 데이터를 나누는 것을 말한다.          
3. 즉, 스키마가 같은 데이터를 2개 이상의 테이블에 나누어 저장한다.    
 
**특징**  
1. 퍼포먼스, 가용성을 위해 Key 기반으로 여러 곳에 분산 저장한다.      
2. 일반적으로 분산 저장 기술에서 파티셔닝은 수평 분할을 의미한다.      
3. 보통 수평 분할을 한다고 했을 때는 하나의 데이터베이스 안에서 이루어지는 경우를 지칭한다.   

**예시**   
1. (레인지) : 고객의 데이터를 샤딩하자 
    1. 고객의 데이터 2만개 
    2. 0~10000번 고객, 샤드1에 저장   
    3. 10000~20000번 고객, 샤드2에 저장   
    4. DBA는 데이터 엑세스 패턴과 저장 공간 이슈(로드의 적절한 분산, 데이터의 균등한 저장)를 고려하여 적절한 샤드키를 결정한다.   
2.(리스트) : 같은 주민 데이터를 처리하기 위해 스키마가 같은 `서현동 주민 테이블`, `정자동 주민 테이블`을 사용한다.      
    1. 인덱스의 크기를 줄이고, 작업 동시성을 늘리기 위한 것  

**장단점**    
* 장점 : 
    * 데이터의 개수를 기준으로 나누어 파티셔닝한다.  
    * 데이터의 개수가 작아지고 따라서 index의 개수도 작아지게 된다.(자연스럽게 성능은 향상) 
* 단점 : 
    * 서버간의 연결 과정이 많아진다.  
    * 데이터를 찾는 과정이 기존보다 복잡하기 때문에 latency가 증가하게 된다.  
    * 하나의 서버가 고장나게 되면 데이터의 무결성이 깨질 수 있다.  





## 



       
       
# 파티셔닝 분할 기준   
DBMS는 분할에 대한 각종 기준을 제공하고 있으며 **분한은 분할 키를 사용한다.**       

## Range 파티셔닝 

* 연속적인 숫자나 날짜 기준으로 파티셔닝한다.   
* 손쉬운 관리 기법 제공에 따른 관리 시간의 단축할 수 있다.
* EX) 날짜(년/월/일), 우편번호, 4분기 등등  

## List 파티셔닝 

* 분포도가 비슷하며, 많은 SQL에서 해당 Column의 조건이 많이 들어오는 경우 유용하다.  
* 특정 파티셔닝에 저장될 Data에 대한 명시적 제어가 가능하다. 
* Multi-Column Partition Key 제공이 힘들다.   
* EX) 아시아-{한국, 일본, 중국} / 북유럽-{노르웨이, 스웨덴, 핀란드}

## 








