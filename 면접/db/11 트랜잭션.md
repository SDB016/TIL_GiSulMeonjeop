
# 트랜잭션 

트랜잭션이란 하나의 논리적 작업 단위이다.          
트랜잭션 안에는 여러 쿼리문이 존재할 수 있고      
이들의 실행이 모두 완료되어야 비로소 하나의 작업이 완료되었다고 판단한다.   
      
대표적으로 UPDATE를 예시로 들 수 있을 것 같습니다.       
UPDATE 같은 경우 find를 하고 update 를 하는 쿼리가 2번 나가지만    
이 작업을 모두 완료해야 하나의 작업이 완료되었다고 말할 수 있을 것 같습니다.  
  
# 트랜잭션 특징 4가지 
     
* **Atomic :** 모든 세부 작업들이 완료되어야 완료되고, 하나라도 실패하면 다 실패해야한다.     
* **Consistency :** 모든 트랜잭션은 일관성 있는 데이터베이스 상태를 유지해야한다(무결성 제약 조약 조건을 만족해야한다.)    
* **Isolation :** 트랜잭션이 동작을 할때 다른 트랜잭션의 간섭을 받지 않아야한다.     
* **Dulablity :** 커밋이 완료되면 해당 데이터는 DB에 지속적으로 반영이 되어야한다.    
       
# 트랜잭션 고립 레벨 4가지    
1. read uncommitted : 
    * 커밋되기전의 데이터를 읽을 수 있다. 
    * **Dirty Read :** 롤백이되는데 다른 트랜잭션에서 그 값을 그대로 가지고 있을 수 있다.   
2. read committed : 
    * 대부분의 DB가 제공해주는 레벨이다.   
    * 커밋된 이후의 데이터만 읽을 수 있다.   
    * **UnRepeatable Read :** 데이터를 읽었는데 도중에 또 커밋이 일어나면 데이터의 불일치가 발생한다.   
3. repeatable read :      
    * 트랜잭션이 종료될 때까지 한번 조회한 데이터를 반복해서 조회한다.       
    * **Phantom Read :** 데이터베이스는 로우 단위로 락을 걸기 때문에, 새로 추가되거나 삭제된 락에 대해서는 처리를 못한다.     
4. serializable :  
    * 트랜잭션이 종료될 때까지 다른 트랜잭션의 접근을 막는다.  
    
# 트랜잭션과 락
  
락은 동시성에 대한 문제    
트랜잭션은 정합성에 대한 문제    
      
* 락이 없다면? -> 값이 변경되더라도 트랜잭션은 성공한다.      
* 트랜잭션이 없다면? -> 데이터가 도중에 실패해도 동시성은 해결한다.  


## 낙관적락 
## 비낙관적 락 

# MySQL에서 락을 거는 방법 
