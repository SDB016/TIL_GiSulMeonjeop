# VPC 
            
* 서브넷 : VPC에 설정한 **네트워크 대역을 더 세부적으로 나눈 네트워크(인스턴스)**          
* 인터넷 게이트웨이 : **VPC의 리소스와 인터넷 간의 통신을 활성화하기 위해 VPC에 연결하는 게이트웨이**        
* 라우팅테이블 : **네트워크 트래픽을 전달할 위치를 결정하는 데 사용하는 라우팅이라는 이름의 규칙 집합**     
               
VPC는 하나의 거대한 가상 내부 네트워크를 의미한다.                  
외부에 공개된 네트워크가 아니라 사내망과 같이 내부에서 사용될 용도의 네트워크를 만들 수 있다.     
개발자는 CIDER 방식을 이용하여 가용할 네트워크의 범위를 지정할 수 있다.                   
   
## 서브네팅 

서브네팅이란 VPC에 설정한 네트워크 대역을 여러 서브넷으로 나누는 행위를 의미한다.          
쉽게 표현하면, 각각의 서브넷들은 하나의 인스턴스 서버로 생각해도 된다.         
VPC와 마찬가지로 서브네팅을 할 때에도 CIDER 방식을 따른다.            
AZ는 달리 설정해서 가용성을 높이는 방법을 추천하고 있다.   
          
**AZ**         
* AWS에 존재하는 개념으로 Availability Zone(가용영역)의 줄임말이다.        
* 가용 영역별로 물리적으로 격리되어 있다.         
* 이러한 이점을 이용하면 장애 내성이 더 강화될 수 있다.       
    * 예를 들어 2개 이상의 서버를 이용하여 서비스를 운영할 경우        
    * 각각의 서버를 각기 다른 AZ에 위치시킨다면 하나가 문제가 생겨도   
      다른 하나는 격리되어 있기 때문에 확률적으로 서비스가 계속 유지될 가능성이 크고           
      이는 곧 서비스의 장애내성이 강화되었다는 의미도 되기 때문이다.      
* 하나의 AZ에 서브넷을 몰아넣으면 AZ가 고장났을때 모든 서브넷을 이용하지 못한다.     
* 반면에 각각의 서브넷의 AZ를 달리하면 어느 한 AZ가 고장나도 예비 서브넷으로 대체가능하다.   

**예시**  
- 대역 : 200.200.0.0/24   
    - kwj1270-public-a : 200.200.0.0/26
    - kwj1270-public-b : 200.200.0.64/26
    - kwj1270-internal-c : 200.200.0.128/27
    - kwj1270-management-d : 200.200.0.160/27
          
뒤에 `/26`은 비트에서 26번은 Net ID(네트워크)라는 뜻이다.          
00000000.0000000.00000000.00은 고정이자 시작지점이다.          
나머지 000000이 할당할 공간인데 크기가 64부터 127일 경우 100000~111111 이므로 `/26`을 사용하면된다.            
앞서 64를 두번 사용했기에 `200.200.0.0/26` 와 `200.200.0.64/26`로 한 것이다.         
32비트는 27까지는 고정시켜도 되므로 위와 같이 작성하면 된다.       
   
## 인터넷 게이트웨이    
   
VPC의 인스턴스와 인터넷 간에 통신할 수 있게 해준다.
   
인터넷 라우팅 가능 트래픽에 대한 VPC 라우팅 테이블에 대상을 제공
퍼블릭 IPv4 주소가 할당된 인스턴스에 대해 NAT(네트워크 주소 변환)를 수행하는 두 가지 목적이 있습니다.
인터넷 게이트웨이 자세한 설명 클릭 -> AWS document
인터넷 게이트웨이 + VPC 연결 -> VPC 인스턴스들이 인터넷에 접속 가능해진다.

서브넷에 속한 EC2가 외부와 통신을 하기 위해서는
자신의 라우팅 테이블에 설정된 정보를 제외한 모든 대역(0.0.0.0/0)에 대한 통신을 Internet Gateway로 요청하게끔 설정해두어야 합니다.
라우팅 테이블을 생성하고 0.0.0.0/0 대역을 앞에서 생성한 Internet Gateway로 매핑합니다.

## 라우팅 테이블   

라우팅 테이블을 적용해야하는 이유는?    

## CIDER 
