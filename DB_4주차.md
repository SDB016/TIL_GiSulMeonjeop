# Transaction
# ğŸ’¡ íŠ¸ëœì­ì…˜ì´ë€ ë¬´ì—‡ì´ê³  íŠ¹ì„±ì— ëŒ€í•´ ì„¤ëª…í•˜ì‹œì˜¤.
ë°ì´í„°ë² ì´ìŠ¤ì˜ ìƒíƒœë¥¼ ë³€í™˜ì‹œí‚¤ëŠ” **í•˜ë‚˜ì˜ ë…¼ë¦¬ì  ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ì‘ì—…ì˜ ë‹¨ìœ„**       
ë˜ëŠ” **í•œêº¼ë²ˆì— ëª¨ë‘ ìˆ˜í–‰ë˜ì–´ì•¼ í•  ì¼ë ¨ì˜ ì—°ì‚°**ë“¤ì„ ì˜ë¯¸í•œë‹¤.      
           
**íŠ¸ëœì­ì…˜ì˜ íŠ¹ì„±**    
* **Atomicity(ì›ìì„±) :**  
    1. íŠ¸ëœì­ì…˜ì˜ ì—°ì‚°ì€ ë°ì´í„°ë² ì´ìŠ¤ì— ëª¨ë‘ ë°˜ì˜ë˜ë“ ì§€ ì•„ë‹ˆë©´ ì „í˜€ ë°˜ì˜ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.   
    2. íŠ¸ëœì­ì…˜ ë‚´ì˜ ëª¨ë“  ëª…ë ¹ì€ ë°˜ë“œì‹œ ì™„ë²½íˆ ìˆ˜í–‰ë˜ì–´ì•¼ í•˜ë©°,       
       ëª¨ë‘ê°€ ì™„ë²½íˆ ìˆ˜í–‰ë˜ì§€ ì•Šê³  ì–´ëŠí•˜ë‚˜ë¼ë„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ íŠ¸ëœì­ì…˜ ì „ë¶€ê°€ ì·¨ì†Œë˜ì–´ì•¼ í•œë‹¤.   
* **Consistency(ì¼ê´€ì„±) :**   
    1. íŠ¸ëœì­ì…˜ì´ ê·¸ ì‹¤í–‰ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ë©´ ì–¸ì œë‚˜ ì¼ê´€ì„± ìˆëŠ” ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœë¡œ ë³€í™˜í•œë‹¤.    
    2. ì‹œìŠ¤í…œì´ ê°€ì§€ê³  ìˆëŠ” ê³ ì •ìš”ì†ŒëŠ” íŠ¸ëœì­ì…˜ ìˆ˜í–‰ ì „ê³¼ íŠ¸ëœì­ì…˜ ìˆ˜í–‰ ì™„ë£Œ í›„ì˜ ìƒíƒœê°€ ê°™ì•„ì•¼ í•œë‹¤.   
* **Isolation(ë…ë¦½ì„±,ê²©ë¦¬ì„±) :**   
    1. ë‘˜ ì´ìƒì˜ íŠ¸ëœì­ì…˜ì´ ë™ì‹œì— ë³‘í–‰ ì‹¤í–‰ë˜ëŠ” ê²½ìš° ì–´ëŠ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ ì‹¤í–‰ì¤‘ì— ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì˜ ì—°ì‚°ì´ ë¼ì–´ë“¤ ìˆ˜ ì—†ë‹¤.   
    2. ìˆ˜í–‰ì¤‘ì¸ íŠ¸ëœì­ì…˜ì€ ì™„ì „íˆ ì™„ë£Œë  ë•Œê¹Œì§€ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì—ì„œ ìˆ˜í–‰ ê²°ê³¼ë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤.   
* **Durablility(ì˜ì†ì„±,ì§€ì†ì„±) :**   
    1. ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œëœ íŠ¸ëœì­ì…˜ì˜ ê²°ê³¼ëŠ” ì‹œìŠ¤í…œì´ ê³ ì¥ë‚˜ë”ë¼ë„ ì˜êµ¬ì ìœ¼ë¡œ ë°˜ì˜ë˜ì–´ì•¼ í•œë‹¤.    
      
# ğŸ’¡ ì ê¸ˆê¸°ë²•(Locking)ì— ëŒ€í•´ ì„¤ëª…í•˜ì‹œì˜¤.   

## ë½í‚¹(Locking)
í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì´ ë°ì´í„°ë¥¼ ì•¡ì„¸ìŠ¤í•˜ëŠ” ë™ì•ˆ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì€ ê·¸ ë°ì´í„°ë¥¼ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ê²Œ í•˜ëŠ” ë°©ë²•
íŠ¸ë™ì­ì…˜ì€ ë°ì´í„°ë¥¼ ì•¡ì„¸ìŠ¤í•˜ê¸° ì „ì— Lockì„ ìš”ì²­í•˜ê³  ì•¡ì„¸ìŠ¤ë¥¼ ë§ˆì¹˜ê³  Lockì„ í•´ì œ
ì´ë¯¸ Lockì´ ê±¸ë ¤ ìˆì„ ë•ŒëŠ” Lockì´ í’€ë¦¬ê¸° ì „ì—ëŠ” ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ìŒ
Locking ë‹¨ìœ„ê°€ ì‘ìœ¼ë©´ ë³‘í–‰ì„± ìˆ˜ì¤€ì´ ë†’ì•„ì§€ë©° ëŒ€ì‹  Locking ì˜¤ë²„í—¤ë“œëŠ” ì¦ê°€í•©ë‹ˆë‹¤.

## 2ë‹¨ê³„ ì ê¸ˆ ê·œì•½(2PL)        
2PLì€ íŠ¸ëœì­ì…˜ ìŠ¤ì¼€ì¤„ì˜ ì§ë ¬ì„±ì„ ë³´ì¥í•˜ëŠ” ëŒ€í‘œì ì¸ ì ê¸ˆ ê¸°ë²•ì´ë‹¤.
ì§ë ¬ì„±ì€ ë³´ì¥í•˜ì§€ë§Œ, êµì°©ìƒíƒœë¥¼ ì˜ˆë°©í•  ìˆ˜ëŠ” ì—†ë‹¤ëŠ” íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆë‹¤.    
    
2PLì€ ì ê¸ˆì„ ì„¤ì •í•˜ëŠ” ë‹¨ê³„ì™€ í•´ì œí•˜ëŠ” ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´ ìˆ˜í–‰í•œë‹¤.      
        
* í™•ì¥ë‹¨ê³„(growing phase) : íŠ¸ëœì­ì…˜ì´ lock ì—°ì‚°ë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆê³  unlock ì—°ì‚°ì€ ìˆ˜í–‰í•  ìˆ˜ ì—†ëŠ” ë‹¨ê³„
* ì¶•ì†Œë‹¨ê³„(shrinking phase) : íŠ¸ëœì­ì…˜ì´ unlock ì—°ì‚°ë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆê³  lock ì—°ì‚°ì€ ìˆ˜í–‰í•  ìˆ˜ ì—†ëŠ” ë‹¨ê³„
 
## íƒ€ì„ ìŠ¤íƒ¬í”„ ìˆœì„œí™”(Time stamp Ordering)
íŠ¸ëœì­ì…˜ ê°„ì˜ ìˆœì„œë¥¼ ë¯¸ë¦¬ ì •í•˜ì—¬ ì œì–´í•˜ëŠ” ë°©ë²•
ì§ë ¬í™” ê¸°ë²•ì…ë‹ˆë‹¤.
       
## ë‚™ê´€ì  ê¸°ë²•    
ì½ê¸° ì „ìš©(Read Only) íŠ¸ëœì­ì…˜ì´ ëŒ€ë¶€ë¶„ì¼ ë•Œ **ë³‘í–‰ ì œì–´ë¥¼ í•˜ì§€ ì•Šì•„ë„ ë¬¸ì œê°€ ì—†ëŠ” ì ì„ ì´ìš©**   
ê²€ì¦ê³¼ í™•ì¸í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ì—¬ ê²€ì¦ ê¸°ë²•, í™•ì¸ ê¸°ë²•ì´ë¼ê³ ë„ ë¶€ë¦…ë‹ˆë‹¤.

```java
@Transactional(readOnly= "true") ì™€ ì—°ê´€ëœ ê²ƒ ê°™ê¸°ë„..
```
   
## ë‹¤ì¤‘ ë²„ì „ ê¸°ë²•
íƒ€ì„ ìŠ¤íƒ¬í”„ ê¸°ë²•ì„ ì´ìš©í•˜ë©° ë²„ì „ì„ ë¶€ì—¬í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ê¸°ë²•
    
# ğŸ’¡ ì ê¸ˆ ê¸°ë²•ì˜ ë¬¸ì œì ì— ëŒ€í•´ì„œ ë§í•˜ì‹œì˜¤.
# ğŸ’¡ êµì°©ìƒíƒœ(Deadlock)ë€ ë¬´ì—‡ì¸ê°€?
> [ì°¸ê³ í•˜ê¸° ì¢‹ì€ ì‚¬ì´íŠ¸](https://sosopro.tistory.com/55)   
   
ì„œë¡œ ë‹¤ë¥¸ í…Œì´ë¸”ì´ ì„œë¡œì˜ í…Œì´ë¸”ì„ ê°±ì‹ í•  ë•Œ ì£¼ë¡œ ë°œìƒí•œë‹¤.   

   
   

# ğŸ’¡ êµì°©ìƒíƒœì˜ ë¹ˆë„ë¥¼ ë‚®ì¶”ëŠ” ë°©ë²•ì—ëŠ” ë¬´ì—‡ì´ ìˆë‚˜ìš”?   
> [ì°¸ê³  ì‚¬ì´íŠ¸](https://kuaaan.tistory.com/100) 
  
1) ì¸ë±ìŠ¤ë¥¼ ì„¤ì •í•œë‹¤. ì¸ë±ìŠ¤ê°€ ì—†ìœ¼ë©´ Lockì´ ê±¸ë¦¬ëŠ” ë²”ìœ„ê°€ í›¨ì”¬ ë„“ì–´ì§€ê¸° ë•Œë¬¸ì— êµì°©ìƒíƒœê°€ ë°œìƒí•˜ê¸° ì‰¬ì›Œì§„ë‹¤.(íìŒ..)      
2) ìì›ë“¤ì„ í•œìª½ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. Aì™€ Bë¼ëŠ” í…Œì´ë¸”ì´ ìˆë‹¤ë©´ ëª¨ë“  ì„¸ì…˜ì—ì„œ A->B ìˆœì„œë¡œ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤. (íë¦„)
3) íŠ¸ëœì­ì…˜ì€ ê°€ê¸‰ì ì´ë©´ ì§§ê²Œ ë§Œë“ ë‹¤.(ìë°”ì—ì„œë„ ë§ˆì°¬ê°€ì§€, ë½ì˜ í¬ê¸°ë¥¼ ìµœì†Œí™”í•˜ë„ë¡)      
4) í…Œì´ë¸”ì˜ í¬ê¸°ë¥¼ ì‘ê²Œ ìª¼ê° ë‹¤. (ì„¸ë¶„í™” -> ì‘ì€ íŠ¸ëœì­ì…˜ ê°€ëŠ¥ -> ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥)     
5) Transaction Isolation Levelì„ "Read Uncommitted"ë¡œ ì„¤ì •í•œë‹¤(ì»¤ë°‹ëœ ë°ì´í„°ë§Œ ì½ì„ ìˆ˜ ìˆë‹¤, [ì¶”ê°€ë‚´ìš©](https://kuaaan.tistory.com/98))
   
